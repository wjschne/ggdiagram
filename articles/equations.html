<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Equations with LaTeX • ggdiagram</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto_Condensed-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="equations_files/libs/quarto-html/popper.min.js"></script><script src="equations_files/libs/quarto-html/tippy.umd.min.js"></script><link href="equations_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="equations_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Equations with LaTeX">
<meta property="og:image" content="https://wjschne.github.io/ggdiagram/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggdiagram</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/angles.html">Angles</a></li>
    <li><a class="dropdown-item" href="../articles/arcwedges.html">Arcs and Wedges</a></li>
    <li><a class="dropdown-item" href="../articles/automation.html">Repetition and Automation</a></li>
    <li><a class="dropdown-item" href="../articles/bezier.html">Bézier Curves</a></li>
    <li><a class="dropdown-item" href="../articles/causalpaths.html">Path Diagrams</a></li>
    <li><a class="dropdown-item" href="../articles/circles.html">Circles</a></li>
    <li><a class="dropdown-item" href="../articles/colors.html">Colors</a></li>
    <li><a class="dropdown-item" href="../articles/ellipses.html">Ellipses</a></li>
    <li><a class="dropdown-item" href="../articles/equations.html">Equations with LaTeX</a></li>
    <li><a class="dropdown-item" href="../articles/lines.html">Lines</a></li>
    <li><a class="dropdown-item" href="../articles/paths.html">Paths</a></li>
    <li><a class="dropdown-item" href="../articles/points.html">Points</a></li>
    <li><a class="dropdown-item" href="../articles/polygons.html">Polygons</a></li>
    <li><a class="dropdown-item" href="../articles/rectangles.html">Rectangles</a></li>
    <li><a class="dropdown-item" href="../articles/segments.html">Segments</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wjschne/ggdiagram/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Equations with LaTeX</h1>




      <small class="dont-index">Source: <a href="https://github.com/wjschne/ggdiagram/blob/main/vignettes/articles/equations.qmd" class="external-link"><code>vignettes/articles/equations.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level2"><h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wjschne/ggdiagram" class="external-link">ggdiagram</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://teunbrand.github.io/ggarrow/" class="external-link">ggarrow</a></span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="advantages-of-ob_label-over-ob_latex">Advantages of <code>ob_label</code> over <code>ob_latex</code>
<a class="anchor" aria-label="anchor" href="#advantages-of-ob_label-over-ob_latex"></a>
</h2>
<p>The <code>ob_label</code> function uses <code><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html" class="external-link">ggtext::geom_richtext</a></code> to create labels. It’s primary advantage is that it is simple and renders quickly. Wherever possible, it is the recommended way to create labels. It understands basic markdown formatting (e.g., italics, bolding, subscripts, and superscripts) as well as some HTML tags (e.g., <code>span</code> and <code>img</code>).</p>
</section><section class="section level2"><h2 id="advantages-of-ob_latex-over-ob_label">Advantages of <code>ob_latex</code> over <code>ob_label</code>
<a class="anchor" aria-label="anchor" href="#advantages-of-ob_latex-over-ob_label"></a>
</h2>
<p>If something more elaborate is needed than italics, bolding, subscripts, and superscripts, we can use LaTeX instead. The <code>ob_latex</code> function can place an image of a LaTeX equation in a ggplot diagram.</p>
<p>For example, suppose I want to label a latent variable’s variance with the symbol <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>σ</mi><mi>e</mi><mn>2</mn></msubsup><annotation encoding="application/x-tex">\sigma_e^2</annotation></semantics></math>. This symbol would be difficult to render in pure HTML, so we can render it in LaTeX instead.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span>font_family <span class="op">=</span> <span class="st">"Roboto Condensed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="op">{</span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ob_circle.html">ob_circle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="../reference/ob_label.html">ob_label</a></span><span class="op">(</span><span class="st">"*e*"</span>, size <span class="op">=</span> <span class="fl">48</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> <span class="op">+</span></span>
<span>  <span class="op">{</span><span class="va">lv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ob_variance.html">ob_variance</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span><span class="op">}</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span>tex <span class="op">=</span> <span class="st">"\\sigma_e^2"</span>,</span>
<span>           center <span class="op">=</span> <span class="va">lv</span><span class="op">@</span><span class="va">midpoint</span><span class="op">(</span><span class="op">)</span>, </span>
<span>           width <span class="op">=</span> <span class="fl">.4</span><span class="op">)</span> </span></code></pre></div>
<div class="cell-output-display">
<div id="fig-latent" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-latent-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-latent-1.png" width="192">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-latent-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 1: Latent variable with variance
</figcaption></figure>
</div>
</div>
</div>
<p>If we want the symbol to be in the same font as the rest of the figure, we can trick LaTeX into giving us any font we have installed on our system. I often use <a href="https://fonts.google.com/specimen/Roboto+Condensed" class="external-link">Roboto Condensed</a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span>font_family <span class="op">=</span> <span class="st">"Roboto Condensed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="op">{</span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ob_circle.html">ob_circle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="../reference/ob_label.html">ob_label</a></span><span class="op">(</span><span class="st">"*e*"</span>, size <span class="op">=</span> <span class="fl">48</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> <span class="op">+</span></span>
<span>  <span class="op">{</span><span class="va">lv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ob_variance.html">ob_variance</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span><span class="op">}</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span>tex <span class="op">=</span> <span class="st">r"(\text{\emph{σ}}_{\text{\emph{e}}}^{\text{2}})"</span>,</span>
<span>           center <span class="op">=</span> <span class="va">lv</span><span class="op">@</span><span class="va">midpoint</span><span class="op">(</span><span class="op">)</span>, </span>
<span>           width <span class="op">=</span> <span class="fl">.4</span>, </span>
<span>           family <span class="op">=</span> <span class="st">"Roboto Condensed"</span><span class="op">)</span> </span></code></pre></div>
<div class="cell-output-display">
<div id="fig-latentroboto" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-latentroboto-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-latentroboto-1.png" width="192">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-latentroboto-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 2: Latent variable with variance rendered in Roboto Condensed
</figcaption></figure>
</div>
</div>
</div>
<p>If you need an equation in a plot that requires something other than a 1:1 aspect ratio, you can set the aspect ratio of the equation to be the same as the aspect ratio as the plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mu</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span><span class="va">sigma</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">4</span> <span class="op">*</span> <span class="va">sigma</span><span class="op">)</span>  <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="va">mu</span>, <span class="va">mu</span>, <span class="va">sigma</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span>ratio <span class="op">=</span> <span class="va">ratio</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Roboto Condensed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.line <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, axis.title.x <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html" class="external-link">element_markdown</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_function.html" class="external-link">stat_function</a></span><span class="op">(</span></span>
<span>    fun <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="va">x</span>, mean <span class="op">=</span> <span class="va">mu</span>, sd <span class="op">=</span> <span class="va">sigma</span><span class="op">)</span>,</span>
<span>    geom <span class="op">=</span> <span class="st">"area"</span>,</span>
<span>    n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"dodgerblue"</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">.5</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span><span class="cn">NULL</span>,</span>
<span>                     breaks <span class="op">=</span> <span class="va">mu</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span> <span class="op">*</span> <span class="va">sigma</span>, <span class="fl">4</span> <span class="op">*</span> <span class="va">sigma</span>, <span class="va">sigma</span><span class="op">)</span>, </span>
<span>                     limits <span class="op">=</span> <span class="va">mu</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span> <span class="op">*</span> <span class="va">sigma</span>, <span class="fl">4</span> <span class="op">*</span> <span class="va">sigma</span>, <span class="va">sigma</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    <span class="cn">NULL</span>,</span>
<span>    breaks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="va">mu</span>, <span class="va">mu</span>, <span class="va">sigma</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span></span>
<span>    <span class="st">r"(f(x) =</span></span>
<span><span class="st">    \frac{1}{\sigma\sqrt{2\pi}}</span></span>
<span><span class="st">    e^{-\frac{1}{2}</span></span>
<span><span class="st">    \left(\frac{x-\mu}{\sigma}\right)^2})"</span>,</span>
<span>    width <span class="op">=</span> <span class="va">sigma</span> <span class="op">*</span> <span class="fl">3</span>,</span>
<span>    aspect_ratio <span class="op">=</span> <span class="va">ratio</span>,</span>
<span>    border <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    filename <span class="op">=</span> <span class="st">"zscore"</span>,</span>
<span>    density <span class="op">=</span> <span class="fl">600</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/place.html">place</a></span><span class="op">(</span><span class="fu"><a href="../reference/ob_point.html">ob_point</a></span><span class="op">(</span><span class="va">mu</span> <span class="op">+</span> <span class="va">sigma</span> <span class="op">*</span> <span class="fl">.7</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="va">mu</span> <span class="op">+</span> <span class="va">sigma</span> <span class="op">*</span> <span class="fl">.7</span>, <span class="va">mu</span>, <span class="va">sigma</span><span class="op">)</span><span class="op">)</span>, </span>
<span>        where <span class="op">=</span> <span class="st">"right"</span>, </span>
<span>        sep <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/ob_label.html">ob_label</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"*&amp;mu;* = "</span>, <span class="va">mu</span><span class="op">)</span>, </span>
<span>           <span class="fu"><a href="../reference/ob_point.html">ob_point</a></span><span class="op">(</span><span class="va">mu</span>, <span class="fl">0</span><span class="op">)</span>, </span>
<span>           vjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>           fill <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>           color <span class="op">=</span> <span class="st">"gray30"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/connect.html">connect</a></span><span class="op">(</span></span>
<span>    <span class="op">{</span><span class="va">p_mu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ob_point.html">ob_point</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mu</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="va">mu</span> <span class="op">+</span> <span class="va">sigma</span>, <span class="va">mu</span>, <span class="va">sigma</span><span class="op">)</span><span class="op">)</span><span class="op">}</span>,</span>
<span>    <span class="op">{</span><span class="va">p_sigma</span> <span class="op">&lt;-</span> <span class="va">p_mu</span> <span class="op">+</span> <span class="fu"><a href="../reference/ob_point.html">ob_point</a></span><span class="op">(</span><span class="va">sigma</span>, <span class="fl">0</span><span class="op">)</span><span class="op">}</span>,</span>
<span>    label <span class="op">=</span> <span class="fu"><a href="../reference/ob_label.html">ob_label</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"*&amp;sigma;* = "</span>, <span class="va">sigma</span><span class="op">)</span>,</span>
<span>      fill <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>      vjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      color <span class="op">=</span> <span class="st">"gray30"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div id="fig-normal" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-normal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-normal-1.png" width="768">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-normal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 3: Normal distribution’s probability density function
</figcaption></figure>
</div>
</div>
</div>
</section><section class="section level2"><h2 id="text-color-and-background-fill-color">Text Color and Background Fill Color<a class="anchor" aria-label="anchor" href="#text-color-and-background-fill-color"></a>
</h2>
<p>The text color is black by default. It can be set to any color via the <code>color</code> property.</p>
<p>The background color of the LaTeX expression will be white by default. If the LaTeX expression is placed inside an object with a filled background, you might want to give the expression the same background fill color.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_circle.html">ob_circle</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"dodgerblue4"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span></span>
<span>    <span class="st">"A+B+C=D"</span>,</span>
<span>    center <span class="op">=</span> <span class="fu"><a href="../reference/ob_point.html">ob_point</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"dodgerblue4"</span>,</span>
<span>    density <span class="op">=</span> <span class="fl">900</span>,</span>
<span>    width <span class="op">=</span> <span class="fl">1.5</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div id="fig-color" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-color-1.png" width="288">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 4: Altering the text color and background fill color.
</figcaption></figure>
</div>
</div>
</div>
<p>Of course, you can always manipulate text color via LaTeX.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_circle.html">ob_circle</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span><span class="st">"Y={\\color[HTML]{CD69C9} X_1^2} + {\\color[HTML]{228B22} X_2^2}"</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div id="fig-textcolor" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-textcolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-textcolor-1.png" width="288">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-textcolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5: Latex Colors
</figcaption></figure>
</div>
</div>
</div>
<p>As a convenience, the <code>latex-color</code> function will surround the expression with the right LaTeX expression to change the color.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_circle.html">ob_circle</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Y="</span>, </span>
<span>                  <span class="fu"><a href="../reference/latex_color.html">latex_color</a></span><span class="op">(</span><span class="st">"X_1^2"</span>, color <span class="op">=</span> <span class="st">"orchid3"</span><span class="op">)</span>,</span>
<span>                  <span class="st">"+"</span>,</span>
<span>                  <span class="fu"><a href="../reference/latex_color.html">latex_color</a></span><span class="op">(</span><span class="st">"X_2^2"</span>, color <span class="op">=</span> <span class="st">"forestgreen"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div id="fig-latexcolor" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-latexcolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-latexcolor-1.png" width="288">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-latexcolor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 6: Using <code>latex_color</code> to alter text color in LaTeX expressions.
</figcaption></figure>
</div>
</div>
</div>
</section><section class="section level2"><h2 id="rotation">Rotation<a class="anchor" aria-label="anchor" href="#rotation"></a>
</h2>
<p>The LaTeX expression can be rotated by setting the <code>angle</code> property.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span>theme_function <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span>, font_size <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="op">{</span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect.html">connect</a></span><span class="op">(</span><span class="fu"><a href="../reference/ob_point.html">ob_point</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/ob_point.html">ob_point</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span><span class="st">"\\left\\lVert\\vec{x}\\right\\rVert=5"</span>, </span>
<span>           center <span class="op">=</span> <span class="va">s</span><span class="op">@</span><span class="va">midpoint</span><span class="op">(</span><span class="op">)</span>, </span>
<span>           height <span class="op">=</span> <span class="fl">.35</span>,</span>
<span>           density <span class="op">=</span> <span class="fl">900</span>,</span>
<span>           angle <span class="op">=</span> <span class="va">s</span><span class="op">@</span><span class="va">line</span><span class="op">@</span><span class="va">angle</span>, </span>
<span>           vjust <span class="op">=</span> <span class="op">-</span><span class="fl">.1</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"\\vec{x}="</span>, <span class="va">s</span><span class="op">@</span><span class="va">p2</span><span class="op">@</span><span class="va">auto_label</span><span class="op">)</span>,</span>
<span>    vjust <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>    hjust <span class="op">=</span> <span class="fl">1.3</span>,</span>
<span>    center <span class="op">=</span> <span class="va">s</span><span class="op">@</span><span class="va">p2</span>,</span>
<span>    height <span class="op">=</span> <span class="fl">.3</span>,</span>
<span>    density <span class="op">=</span> <span class="fl">600</span></span>
<span>  <span class="op">)</span> </span>
<span> </span></code></pre></div>
<div class="cell-output-display">
<div id="fig-rotated" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-rotated-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-rotated-1.png" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rotated-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 7: Rotated equation
</figcaption></figure>
</div>
</div>
</div>
</section><section class="section level2"><h2 id="image-quality">Image quality<a class="anchor" aria-label="anchor" href="#image-quality"></a>
</h2>
<p>The default density for <code>ob_latex</code> images is 300 dots per inch. If a small expression is displayed as a large image, it will appear pixelated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_circle.html">ob_circle</a></span><span class="op">(</span>radius <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span><span class="st">"X_i^2"</span>, </span>
<span>           width <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div id="fig-pixelated300" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-pixelated300-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-pixelated300-1.png" width="384">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pixelated300-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 8: A latex expression with poor image quality
</figcaption></figure>
</div>
</div>
</div>
<p>Setting the density to a higher value will usually create a better image.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggdiagram.html">ggdiagram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_circle.html">ob_circle</a></span><span class="op">(</span>radius <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/ob_latex.html">ob_latex</a></span><span class="op">(</span><span class="st">"X_i^2"</span>, </span>
<span>           width <span class="op">=</span> <span class="fl">1.25</span>,</span>
<span>           density <span class="op">=</span> <span class="fl">900</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div id="fig-pixelated600" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-pixelated600-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="equations_files/figure-html/fig-pixelated600-1.png" width="384">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pixelated600-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 9: A latex expression with better image quality
</figcaption></figure>
</div>
</div>
</div>
<p>Higher densities are not always better, however. In addition to using more memory and rendering more slowly, images with very high densities will sometimes appear blurry or pixelated.</p>
</section><section class="section level2"><h2 id="how-does-ob_latex-work">How does <code>ob_latex</code> work?<a class="anchor" aria-label="anchor" href="#how-does-ob_latex-work"></a>
</h2>
<p>The <code>ob_latex</code> function works through these steps:</p>
<ol type="1">
<li>Create a .tex file with content based on the LaTeX <a href="https://ctan.org/pkg/standalone" class="external-link">standalone package</a>.</li>
<li>Create a .pdf file via the <code><a href="https://rdrr.io/pkg/tinytex/man/latexmk.html" class="external-link">tinytex::xelatex</a></code> function, if tinytex is available. Otherwise, use xelatex via a shell command.</li>
<li>Import the .pdf file as a raster bitmap via the <code><a href="https://docs.ropensci.org/magick/reference/editing.html" class="external-link">magick::image_read_pdf</a></code> function.</li>
<li>Store the raster bitmap in the <code>ob_latex@image</code> slot.</li>
</ol>
<p>When rendered in ggplot2, the bitmap is displayed via <code><a href="https://ggplot2.tidyverse.org/reference/annotation_raster.html" class="external-link">ggplot2::annotation_raster</a></code>.</p>
</section><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by W. Joel Schneider.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
